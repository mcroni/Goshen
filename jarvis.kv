#:import Toolbar mat.toolbar.Toolbar
#:import MDList mat.list.MDList
#:import ThemeManager mat.theming.ThemeManager
#:import NavigationDrawer mat.navigationdrawer.NavigationDrawer
#:import MDCheckbox mat.selectioncontrols.MDCheckbox
#:import MDSwitch mat.selectioncontrols.MDSwitch
#:import OneLineListItem mat.list.OneLineListItem
#:import TwoLineListItem mat.list.TwoLineListItem
#:import ThreeLineListItem mat.list.ThreeLineListItem
#:import OneLineAvatarListItem mat.list.OneLineAvatarListItem
#:import OneLineIconListItem mat.list.OneLineIconListItem
#:import OneLineAvatarIconListItem mat.list.OneLineAvatarIconListItem
#:import SingleLineTextField mat.textfields.SingleLineTextField
#:import MDSpinner mat.spinner.MDSpinner
#:import MDCard mat.card.MDCard
#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import colors mat.color_definitions.colors
#:import SmartTile mat.grid.SmartTile
#:import SmartTileWithLabel mat.grid.SmartTileWithLabel
#:import MDSlider mat.slider.MDSlider
#:import MDLabel mat.label.MDLabel
#:import MDDialog mat.dialog.MDDialog






<DBScroll>:
    id: dbscroll
    title: ''
    size_hint: None, None
    size: 400,100
    FloatLayout:
        Label:
            text: 'Sending'

            pos_hint:{'center_x': 0.8, 'center_y': 0.7}
            size_hint: None, None
            size: 50,100

        MDSpinner:
            size_hint: None,None
            size: dp(30),dp(30)
            pos_hint:{'center_x': 0.2, 'center_y': 0.7}


<MainScreen>:
    Image:
        source: 'tower.png'
    #BoxLayout:
     #   orientation: 'vertical'
    Toolbar:
        id: toolbar
        title: 'GoshenApp'
        right_action_items: [['menu', lambda x: app.nav_drawer.toggle()]]




<F>:
    name: name
    message: message
    id: sub_button
    title: 'Share Your Testimony'
    markup: True
    size_hint: .9, None
    height: dp(300)
    pos_hint:{'center_x': 0.5, 'center_y': 0.65}
    background: 'white.png'
    FloatLayout:
        SingleLineTextField:
            id: name
            hint_text: 'Name'
            multiline: False
            pos_hint:{'center_x': 0.5, 'center_y': 0.8}
        SingleLineTextField:
            id: message
            hint_text: 'Message'
            multiline: True
            pos_hint:{'center_x': 0.5, 'center_y': 0.5}

        MDFlatButton:
            text: 'ShieeeeeeM)'
            pos_hint:{'center_x': 0.5, 'center_y': 0.2}
            on_press: root.shiemor()


<Testimonies>:
    Image:
        source: 'tower.png'
    MDLabel:
        font_style: 'Body1'
        theme_text_color: 'Primary'
        text: "It is always good to share what the Lord has done in your life to encourage\nothers in the church  "
        halign: 'center'
        pos_hint:{'center_x': 0.5, 'center_y': 0.85}

        font_size: 25

    MDRaisedButton:
        text: " Testify"
        opposite_colors: True
        size_hint: None, None
        size: 4 * dp(40), dp(40)
        pos_hint: {'center_x': 0.2, 'center_y': 0.3}
        font_name: 'Roboto-Regular'
        on_release: root.share();


    MDRaisedButton:
        text: " read"
        opposite_colors: True
        size_hint: None, None
        size: 4 * dp(40), dp(40)
        pos_hint: {'center_x': 0.8, 'center_y': 0.3}
        font_name: 'Roboto-Regular'
        on_release: root.read()





<Pastors>:
    pas_text_field:pas_text_field
    name_text_field:name_text_field
    Image:
        source: 'tower.png'

    FloatLayout:
        SingleLineTextField:
            id: name_text_field
            size_hint: 0.6, None
            height: dp(48)
            hint_text: "Name "
            pos_hint: {'center_x':.5, 'center_y': .7}
            font_name:'Roboto-Thin'

        SingleLineTextField:
            id: pas_text_field
            size_hint: 0.6, None
            height: dp(48)
            hint_text: "Password "
            pos_hint: {'center_x':.5, 'center_y': .5}
            font_name:'Roboto-Thin'
            password: True


        MDRaisedButton:
            text: "Login"
            opposite_colors: True
            size_hint: None, None
            size: 4 * dp(40), dp(40)
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            font_name: 'Roboto-Regular'
            on_release: root.login()






<Sermons>
    Image:
        source: 'tower.png'
    MDSpinner:
        size_hint: None,None
        size: dp(35),dp(35)
        pos_hint:{'center_x': 0.5, 'center_y': 0.85}




<Directory>:
    ml:ml
    scroller: scroller
    button:button
    ScrollView:
        id: scroller
        do_scroll_x: False
        bar_color: [.1, .5, .7, .9]
        bar_margin: 3
        bar_width: 5

        MDList:
            id: ml
            MDFlatButton:
                id: button
                text: 'Load Contacts'
                pos_hint:{'center_x': 0.5, 'center_y': 0.5}
                on_release: root.load_contacts();






<Requests>:
    name: name
    prayer: prayer
    Image:
        source: 'tower.png'
    FloatLayout:
        MDLabel:
            font_style: 'Body1'
            theme_text_color: 'Primary'
            text: "Phil 4:6\nDont\'t worry about anything;instead pray about everything. Tell God what you need and thank him for all he has done"
            halign: 'center'
            pos_hint:{'center_x': 0.5, 'center_y': 0.85}
            markup: True
            font_size: 25
            color: 1, 0, 0, 1

        SingleLineTextField:
            id: name
            size_hint: 0.6, None
            height: dp(48)
            hint_text: "Full Name "
            pos_hint: {'center_x':.5, 'center_y': .6}
            font_name:'Roboto-Thin'
            multiline: False

        SingleLineTextField:
            id: prayer
            size_hint: 0.6, None
            height: dp(50)
            hint_text: "Prayer "
            pos_hint: {'center_x':.5, 'center_y': .4}
            font_name:'Roboto-Thin'
            multiline: True
            hint_text: "Type Your Requests Here"
        MDFloatingActionButton:
            id:  float_act_btn
            icon:'plus'
            size_hint: None, None
            size: dp(56), dp(56)
            opposite_colors:    True
            elevation_normal:    8
            pos_hint:{'center_x': 0.8, 'center_y': 0.2}
            on_release: root.add_request();prayer.text='';name.text=''#;root.send_notify()



<RequestsReader>:
    BoxLayout:
        orientation: 'vertical'
        padding: 5
        spacing: 5
        Button:
            text: "READ REQUESTS"
            background_normal: 'back_norm4.png'
            on_release: root.load_requests()
        MDRaisedButton:
            text: "Add Annoucements"
            on_release: root.add_announce()
        Button:
            text: "READ REQUESTS"
            background_normal: 'back_norm2.png'



<Announce>:
    message: message
    title: 'Add Announcement'
    markup: True
    size_hint: .9, None
    height: dp(300)
    pos_hint:{'center_x': 0.5, 'center_y': 0.65}
    FloatLayout:
        SingleLineTextField:
            id: message
            hint_text: 'Message To Annouce'
            multiline: False
            pos_hint:{'center_x': 0.5, 'center_y': 0.8}

        MDFloatingActionButton:
            id:  float_act_btn
            icon:'plus'
            size_hint: None, None
            size: dp(56), dp(56)
            opposite_colors:    True
            elevation_normal:    8
            pos_hint:{'center_x': 0.8, 'center_y': 0.2}
            on_release: root.add_announce()



<TithePopup>:
    amount:amount
    add:add

    size_hint: .6, None
    height: dp(300)
    pos_hint:{'center_x': 0.5, 'center_y': 0.65}
    BoxLayout:
        orientation:'vertical'
        TextInput:
            id: amount
            hint_text: 'Amount'
            font_size: 50
        BoxLayout:
            orientation: 'horizontal'
            Button:
                id: add
                text: 'Add'
                on_press: root.on_add(root.title,int(amount.text))



<TitheViewer>:
    ml:ml
    Image:
        source: 'tower.png'

    ScrollView:
        id: scroller
        do_scroll_x: False
        bar_color: [.1, .5, .7, .9]
        bar_margin: 3
        bar_width: 5
        MDList:
            id: ml




<Tithe>:
    months: months
    Image:
        source:'tower.png'
    ScrollView:
        id: scroller
        do_scroll_x: False
        GridLayout:
            padding: 4
            spacing: 4
            cols: 2
            id: months
            size_hint_y: None
            height: 8 * dp(100) # /1 * self.row_default_height
    MDFloatingActionButton:
        id:  float_act_btn
        icon:'receipt' #chart
        size_hint: None, None
        size: dp(60), dp(60)
        opposite_colors:    True
        elevation_normal:    8
        pos_hint:{'center_x': 0.8, 'center_y': 0.2}
        on_press: app.change_screen('tithe_viewer')






<GalleryPopup>:
    gallery_popup:gallery_popup
    image:image
    id: gallery_popup
    title: 'Viewer'
    size_hint: .9, None
    height: dp(550)
    pos_hint:{'center_x': 0.5, 'center_y': 0.5}
    FloatLayout:
        AsyncImage:
            id: image
            allow_stretch: True
            keep_ratio: False
            #this will be used to
            pos_hint:{'center_x': 0.5, 'center_y': 0.5}


<Gallery>:
    scroller: scroller
    grid: grid
    float_act_btn: float_act_btn

    ScrollView:
        id: scroller
        do_scroll_x: False
        GridLayout:
            id: grid
            cols: 2
            #row_default_height: (self.width - self.cols*self.spacing[0])/self.cols
            #row_force_default: True
            size_hint_y: None
            height: 8 * dp(100) # /1 * self.row_default_height
            padding: dp(4), dp(4)
            spacing: dp(4)


    MDFloatingActionButton:
        id:  float_act_btn
        icon:'plus'
        size_hint: None, None
        size: dp(56), dp(56)
        opposite_colors:    True
        elevation_normal:    8
        pos_hint:{'center_x': 0.8, 'center_y': 0.2}
       # on_release: root.add()




<Announcements>:
    ml:ml
    scroller:scroller

    Image:
        source: 'tower.png'
    ScrollView:
        id: scroller
        do_scroll_x: False
        bar_color: [.1, .5, .7, .9]
        bar_margin: 3
        bar_width: 5

        MDList:
            id: ml
            MDFlatButton:
                id: button
                text: 'Load Contacts'
                pos_hint:{'center_x': 0.5, 'center_y': 0.5}
                on_release: root.load_announcements()




<Drawer>:
    title: "Tower of Favour"
    NavigationDrawerIconButton:
        icon: 'mic'
        text: "Testimonies"
        #on_release: app.root.current = 'testimonies'
        on_press: app.change_screen('testimonies')

    NavigationDrawerIconButton:
        icon: 'fire'
        text: "Prayer Requests"
        source: 'img/bg_home.png'
        on_release: app.change_screen('requests')

    NavigationDrawerIconButton:
        icon: 'headset'
        text: "Audio Sermons"
        on_release: app.change_screen('sermons')

    NavigationDrawerIconButton:
        icon: 'calendar-check'
        text: "Daily Guide"
        on_release: app.change_screen('guide')

    NavigationDrawerIconButton:
        icon: 'pin-account'
        text: "Pastors Circle"
        on_release: app.change_screen('pastors')


    NavigationDrawerIconButton:
        icon: 'info'
        text: "Announcements"
        on_release: app.change_screen('announcements')
    NavigationDrawerIconButton:
        icon: 'calendar-alt'
        text: "Calender"
        on_release: app.change_screen('calender')

    NavigationDrawerIconButton:
        icon: 'dialpad'
        text: "Directory"
        on_release: app.change_screen('directory')

    NavigationDrawerIconButton:
        icon: 'balance-wallet'
        text: "Tithe Calculator"
        on_release: app.change_screen('tithe')


    NavigationDrawerIconButton:
        icon: 'slideshow'
        text: "Gallery"
        on_release: app.change_screen('gallery')

    NavigationDrawerIconButton:
        icon: 'youtube'
        text: "GoshenTv"
        on_release: app.change_screen('screen1')

    NavigationDrawerIconButton:
        icon: 'key'
        text: "Login"
        on_release: app.change_screen('login'); print('testing login screen')
    NavigationDrawerIconButton:
        icon: 'flip-to-back'
        text: "Back"
        on_release: app.change_screen('screen1')








